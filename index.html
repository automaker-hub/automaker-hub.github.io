<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gmail æ•´ç†ãƒ„ãƒ¼ãƒ« â€“ Mail Cleaner Lab | automaker-hub</title>

  <!-- â˜… SEO åŸºæœ¬ã‚¿ã‚° -->
  <meta name="description" content="Gmail ã®ä¸è¦ãƒ¡ãƒ¼ãƒ«ã‚’ä¸€æ°—ã«æ•´ç†ã§ãã‚‹ç„¡æ–™ãƒ„ãƒ¼ãƒ«ã€‚æ¤œç´¢æ¡ä»¶ã‚’è‡ªå‹•ç”Ÿæˆã—ã¦ã€å‰Šé™¤ãƒ»ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ»æ—¢èª­åŒ–ã¾ã§ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§å®Ÿè¡Œã§ãã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã ã‘ã§å®Œçµã—ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ã€‚">
  <meta name="keywords" content="Gmail æ•´ç†, Gmail ä¸€æ‹¬å‰Šé™¤, ãƒ¡ãƒ¼ãƒ« æ•´ç† ãƒ„ãƒ¼ãƒ«, è¿·æƒ‘ãƒ¡ãƒ¼ãƒ« å‰Šé™¤, ãƒ¡ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹ ç‰‡ä»˜ã‘">

  <!-- â˜… ã‚«ãƒãƒ‹ã‚«ãƒ«ï¼ˆæ­£è¦ URLï¼‰ -->
  <link rel="canonical" href="https://automaker-hub.github.io/">

  <!-- â˜… OGP -->
  <meta property="og:title" content="Gmail æ•´ç†ãƒ„ãƒ¼ãƒ« â€“ Mail Cleaner Lab" />
  <meta property="og:description" content="Gmail ã®ä¸è¦ãƒ¡ãƒ¼ãƒ«ã‚’ä¸€æ‹¬æ•´ç†ã€‚æ¤œç´¢æ¡ä»¶ã‚’è‡ªå‹•ç”Ÿæˆã—ã€å‰Šé™¤ãƒ»ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ»æ—¢èª­åŒ–ã¾ã§ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§å®Ÿè¡Œã§ãã‚‹ç„¡æ–™ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://automaker-hub.github.io/" />
  <meta property="og:image" content="https://automaker-hub.github.io/ogp.png" />
  <meta property="og:site_name" content="Mail Cleaner Lab" />
  <meta property="og:locale" content="ja_JP" />

  <!-- â˜… Twitter ã‚«ãƒ¼ãƒ‰ -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Gmail æ•´ç†ãƒ„ãƒ¼ãƒ« â€“ Mail Cleaner Lab" />
  <meta name="twitter:description" content="Gmail ã®ä¸è¦ãƒ¡ãƒ¼ãƒ«ã‚’ä¸€æ‹¬æ•´ç†ã€‚æ¤œç´¢æ¡ä»¶ã‚’è‡ªå‹•ç”Ÿæˆã—ã€å‰Šé™¤ãƒ»ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ»æ—¢èª­åŒ–ã¾ã§ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§å®Ÿè¡Œã§ãã‚‹ç„¡æ–™ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚" />
  <meta name="twitter:image" content="https://automaker-hub.github.io/ogp.png" />

  <!-- â˜… æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆJSON-LDï¼‰ -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Gmail æ•´ç†ãƒ„ãƒ¼ãƒ« â€“ Mail Cleaner Lab",
    "url": "https://automaker-hub.github.io/",
    "applicationCategory": "Utility",
    "description": "Gmail ã®ä¸è¦ãƒ¡ãƒ¼ãƒ«ã‚’ä¸€æ‹¬æ•´ç†ã€‚æ¤œç´¢æ¡ä»¶ã®è‡ªå‹•ç”Ÿæˆã¨ã€å‰Šé™¤ãƒ»ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ»æ—¢èª­åŒ–ã‚’ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§å®Ÿè¡Œã§ãã‚‹ç„¡æ–™ãƒ„ãƒ¼ãƒ«ã€‚",
    "operatingSystem": "All",
    "author": {
      "@type": "Person",
      "name": "automaker-hub"
    }
  }
  </script>

  <!-- AdSenseï¼ˆãã®ã¾ã¾ã§ OKï¼‰ -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2398505946967311"
    crossorigin="anonymous"></script>

  <style>
    /* ===================== */
    /*   ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ        */
    /* ===================== */
    :root {
      --bg: #f3f4f6;
      --header-bg: #ffffff;
      --card-bg: #ffffff;
      --accent: #1a73e8; /* Googleç³»ãƒ–ãƒ«ãƒ¼ */
      --accent-soft: rgba(26, 115, 232, 0.08);
      --border: #d1d5db;
      --text-main: #111827;
      --text-sub: #6b7280;
      --danger: #d93025;
      --danger-soft: rgba(217, 48, 37, 0.06);
      --shadow-soft: 0 8px 24px rgba(15, 23, 42, 0.08);
      --radius-lg: 14px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text-main);
      min-height: 100vh;
    }

    .page {
      max-width: 1120px;
      margin: 0 auto;
      padding: 16px 16px 32px;
    }

    /* ===================== */
    /*   ãƒ˜ãƒƒãƒ€ãƒ¼             */
    /* ===================== */
    header {
      background: var(--header-bg);
      border-radius: 0 0 16px 16px;
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.06);
      padding: 12px 16px 16px;
      margin: -8px -16px 12px;
      border-bottom: 1px solid #e5e7eb;
    }

    .headline {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
    }

    .headline-left {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 12px;
    }

    .app-icon {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: radial-gradient(circle at 30% 30%, #ffffff, #e3f2fd);
      border: 1px solid #dbeafe;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      color: var(--accent);
      flex-shrink: 0;
    }

    .app-title-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .app-title {
      margin: 0;
      font-size: 1.4rem;
      letter-spacing: 0.02em;
      font-weight: 700;
      color: #111827;
    }

    .app-subtitle {
      margin: 0;
      font-size: 0.85rem;
      color: var(--text-sub);
      line-height: 1.6;
    }

    .headline-right {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .headline-tag {
      font-size: 0.75rem;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      color: var(--text-sub);
      background: #f9fafb;
    }

    /* å•ã„åˆã‚ã›ãƒœã‚¿ãƒ³ */
    .btn-contact {
      padding: 8px 14px;
      background: #ffffff;
      border: 1px solid #d1d5db;
      border-radius: 999px;
      color: #374151;
      font-size: 0.8rem;
      text-decoration: none;
      transition: 0.15s;
      display: inline-flex;
      align-items: center;
      white-space: nowrap;
    }

    .btn-contact:hover {
      background: #eff6ff;
      border-color: #93c5fd;
      color: #1d4ed8;
    }

    /* OAuth ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ */
    .auth-area {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .btn-auth {
      padding: 8px 14px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.85rem;
      font-weight: 600;
      background: var(--accent);
      color: #ffffff;
      box-shadow: 0 1px 4px rgba(15, 23, 42, 0.18);
    }

    .btn-auth.secondary {
      background: #ffffff;
      border: 1px solid #d1d5db;
      color: #374151;
      box-shadow: none;
    }

    .btn-auth .icon {
      font-size: 1rem;
    }

    .pill-mini {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 0.74rem;
      border: 1px solid #e5e7eb;
      color: var(--text-sub);
      white-space: nowrap;
      background: #f9fafb;
    }

    .pill-mini .dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #9ca3af;
      transition: background 0.15s, box-shadow 0.15s;
    }

    .pill-mini .dot.on {
      background: #22c55e;
      box-shadow: 0 0 6px rgba(22, 163, 74, 0.9);
    }

    .pill-mini .dot.off {
      background: #f97316;
      box-shadow: none;
    }

    /* ===================== */
    /*   ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ     */
    /* ===================== */
    .layout {
      display: flex;
      gap: 16px;
      margin-top: 16px;
      align-items: flex-start;
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
      padding: 16px 18px;
      flex: 1;
      min-width: 0;
    }

    .card h2 {
      margin-top: 0;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #111827;
    }

    .card h2 .dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
    }

    .card .desc {
      margin: 4px 0 12px;
      font-size: 0.8rem;
      color: var(--text-sub);
      line-height: 1.6;
    }

    .step-label {
      font-size: 0.78rem;
      font-weight: 600;
      margin: 10px 0 4px;
      color: #374151;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .step-label .badge-step {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      font-size: 0.7rem;
      font-weight: 700;
    }

    .section-label {
      font-size: 0.78rem;
      font-weight: 600;
      margin: 10px 0 4px;
      color: #4b5563;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
      background: #ffffff;
      color: var(--text-main);
      font-size: 0.85rem;
      outline: none;
      transition: border 0.15s, box-shadow 0.15s, background 0.15s;
      font-family: inherit;
    }

    input::placeholder,
    textarea::placeholder {
      color: #9ca3af;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(26, 115, 232, 0.35);
      background: #ffffff;
    }

    textarea {
      resize: vertical;
      min-height: 70px;
    }

    .row-two {
      display: flex;
      gap: 8px;
    }

    .row-two > div {
      flex: 1;
    }

    .preset {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .preset button {
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      color: #4b5563;
      font-size: 0.75rem;
      padding: 4px 10px;
      cursor: pointer;
      transition: background 0.12s, color 0.12s, border 0.12s, transform 0.07s;
    }

    .preset button:hover {
      background: #e0edff;
      border-color: #bfdbfe;
      color: #1d4ed8;
      transform: translateY(-1px);
    }

    .button-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }

    .btn-main,
    .btn-secondary,
    .btn-danger,
    .btn-ghost {
      flex: 1;
      min-width: 120px;
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 0.86rem;
      font-weight: 600;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: transform 0.07s ease-out, box-shadow 0.15s, background 0.15s, opacity 0.15s;
      white-space: nowrap;
    }

    .btn-main {
      background: var(--accent);
      color: #ffffff;
      box-shadow: 0 1px 4px rgba(15, 23, 42, 0.18);
      border: 1px solid #1d4ed8;
    }

    .btn-secondary {
      background: #ffffff;
      border: 1px solid #d1d5db;
      color: #374151;
    }

    .btn-danger {
      background: var(--danger);
      color: #ffffff;
      box-shadow: 0 1px 4px rgba(15, 23, 42, 0.18);
      border: 1px solid #b91c1c;
    }

    .btn-ghost {
      background: #f9fafb;
      border: 1px dashed #d1d5db;
      color: #6b7280;
    }

    .btn-main:hover,
    .btn-secondary:hover,
    .btn-danger:hover,
    .btn-ghost:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(15, 23, 42, 0.12);
      opacity: 0.97;
    }

    .btn-main .icon,
    .btn-secondary .icon,
    .btn-danger .icon {
      font-size: 1rem;
    }

    select {
      background-image: linear-gradient(45deg, transparent 50%, #9ca3af 50%),
                        linear-gradient(135deg, #9ca3af 50%, transparent 50%);
      background-position: calc(100% - 14px) 50%, calc(100% - 9px) 50%;
      background-size: 5px 5px, 5px 5px;
      background-repeat: no-repeat;
      appearance: none;
    }

    .result-block {
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      padding: 10px 12px;
      margin-bottom: 10px;
      background: #f9fafb;
    }

    .result-block.danger {
      background: #fef2f2;
      border-color: #fecaca;
    }

    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .result-header .title {
      font-size: 0.8rem;
      font-weight: 600;
      color: #374151;
    }

    .result-header .counter {
      font-size: 0.75rem;
      color: var(--text-sub);
    }

    .ad-slot {
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px dashed #d1d5db;
      background: #ffffff;
      font-size: 0.78rem;
      color: var(--text-sub);
    }

    .ad-slot strong {
      color: #1d4ed8;
    }

    footer {
      margin-top: 18px;
      font-size: 0.7rem;
      color: #9ca3af;
      text-align: right;
    }

    /* ã‚¹ãƒãƒ›å¯¾å¿œ */
    @media (max-width: 768px) {
      .page {
        padding: 8px 10px 24px;
      }

      header {
        margin: -8px -10px 8px;
        border-radius: 0 0 12px 12px;
      }

      .headline {
        align-items: flex-start;
      }

      .headline-left {
        width: 100%;
      }

      .app-title {
        font-size: 1.25rem;
      }

      .app-subtitle {
        font-size: 0.8rem;
      }

      .headline-right {
        width: 100%;
        justify-content: flex-start;
      }

      .auth-area {
        flex-direction: column;
        align-items: flex-start;
      }

      .layout {
        flex-direction: column;
      }

      .card {
        padding: 14px 14px 16px;
      }

      .button-row {
        flex-direction: column;
      }

      .btn-main,
      .btn-secondary,
      .btn-danger,
      .btn-ghost {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="headline">
        <div class="headline-left">
          <div class="app-icon" aria-hidden="true">ğŸ“§</div>
          <div class="app-title-block">
            <h1 class="app-title">Gmail æ•´ç†ãƒ„ãƒ¼ãƒ«</h1>
            <p class="app-subtitle">
              ãŸã‚è¾¼ã‚“ã ãƒ¡ãƒ¼ãƒ«ã‚’ä¸€æ°—ã«ãŠç‰‡ä»˜ã‘ã€‚<br />
              æ¡ä»¶ã‚’é¸ã‚“ã§ã€Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ æœ¬ç•ªå®Ÿè¡Œã€ã®2ã‚¹ãƒ†ãƒƒãƒ—ã§ã€å®‰å…¨ã«æ•´ç†ã§ãã¾ã™ã€‚
            </p>
          </div>
        </div>
        <div class="headline-right">
          <span class="headline-tag">ç„¡æ–™ãƒ»ãƒ–ãƒ©ã‚¦ã‚¶ã ã‘ã§ä½¿ãˆã¾ã™</span>
          <a href="contact.html" class="btn-contact">ãŠå•ã„åˆã‚ã›</a>
        </div>
      </div>

      <!-- OAuth ãƒœã‚¿ãƒ³ -->
      <div class="auth-area">
        <button id="oauth-btn" class="btn-auth">
          <span class="icon">ğŸ”</span>
          Step1ï¼šGoogle ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æº
        </button>
        <button id="btn-signout" class="btn-auth secondary">
          <span class="icon">ğŸšª</span>
          é€£æºã‚’è§£é™¤ã™ã‚‹
        </button>
        <span class="pill-mini" id="auth-status">
          <span class="dot off" id="auth-dot"></span> ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœªé€£æº
        </span>
      </div>
    </header>

    <main class="layout">
      <!-- å·¦å´ï¼šæ¡ä»¶è¨­å®šã‚¨ãƒªã‚¢ -->
      <section class="card" aria-label="æ¡ä»¶è¨­å®š">
        <h2>
          <span class="dot"></span>
          Step2ï¼šæ•´ç†ã—ãŸã„ãƒ¡ãƒ¼ãƒ«ã®æ¡ä»¶ã‚’ãˆã‚‰ã¶
        </h2>
        <p class="desc">
          ã©ã‚“ãªãƒ¡ãƒ¼ãƒ«ã‚’æ•´ç†ã—ãŸã„ã‹ãˆã‚‰ã³ã¾ã™ã€‚<br />
          ã€Œãƒ—ãƒªã‚»ãƒƒãƒˆã€ã‚’æŠ¼ã™ã¨ã€ã‚ˆãã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒãƒœã‚¿ãƒ³ã²ã¨ã¤ã§å…¥ã‚Šã¾ã™ã€‚
        </p>

        <div class="step-label">
          <span class="badge-step">1</span> ã¾ãšã¯ã€Œã‚ˆãä½¿ã†ãƒ—ãƒªã‚»ãƒƒãƒˆã€ã‹ã‚‰é¸ã‚“ã§ã¿ã¾ã—ã‚‡ã†
        </div>
        <div class="preset">
          <button type="button" data-preset="rakuten">æ¥½å¤©ç³»ãƒ¡ãƒ¼ãƒ«</button>
          <button type="button" data-preset="amazon">Amazon é€šçŸ¥</button>
          <button type="button" data-preset="promo">åºƒå‘Šãƒ»ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³</button>
          <button type="button" data-preset="magazine">ãƒ¡ãƒ«ãƒã‚¬å…¨èˆ¬</button>
          <button type="button" data-preset="old-promo">30æ—¥ã‚ˆã‚Šå‰ã®åºƒå‘Š</button>
        </div>

        <div class="step-label">
          <span class="badge-step">2</span> æ¡ä»¶ã‚’ç´°ã‹ãèª¿æ•´ã—ãŸã„å ´åˆã ã‘ã€ä¸‹ã‚’å…¥åŠ›ã—ã¾ã™
        </div>

        <div class="section-label">é€ä¿¡å…ƒï¼ˆfromï¼‰</div>
        <input id="from-input" type="text" placeholder="ä¾‹ï¼šnews@rakuten.co.jp / @example.com" />

        <div class="section-label">ä»¶åã«å«ã¾ã‚Œã‚‹è¨€è‘‰</div>
        <input id="subject-input" type="text" placeholder="ä¾‹ï¼šãƒ¡ãƒ«ãƒã‚¬, ã‚¯ãƒ¼ãƒãƒ³" />

        <div class="section-label">æœ¬æ–‡ã«å«ã¾ã‚Œã‚‹è¨€è‘‰</div>
        <input id="body-input" type="text" placeholder="ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°å¯" />

        <div class="section-label">é™¤å¤–ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆå¯¾è±¡ã‹ã‚‰å¤–ã—ãŸã„ã‚‚ã®ï¼‰</div>
        <input id="exclude-input" type="text" placeholder="é‡è¦ãªãŠçŸ¥ã‚‰ã›ãªã©ã€æ¶ˆã—ãŸããªã„ã‚‚ã®" />

        <div class="row-two">
          <div>
            <div class="section-label">ã„ã¤ä»¥é™ã®ãƒ¡ãƒ¼ãƒ«</div>
            <input id="after-input" type="text" placeholder="ä¾‹ï¼š7d / 2024-01-01" />
          </div>
          <div>
            <div class="section-label">ã„ã¤ä»¥å‰ã®ãƒ¡ãƒ¼ãƒ«</div>
            <input id="before-input" type="text" placeholder="ä¾‹ï¼š30d / 2023-12-31" />
          </div>
        </div>

        <div class="section-label">è‡ªå‹•ã§ä½œã‚‰ã‚ŒãŸæ¤œç´¢æ¡ä»¶ï¼ˆãã®ã¾ã¾ç·¨é›†ã‚‚ã§ãã¾ã™ï¼‰</div>
        <textarea id="query-text" rows="4" placeholder="ã“ã“ã«æ¤œç´¢æ¡ä»¶ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™"></textarea>

        <div class="section-label">å®Ÿè¡Œã™ã‚‹æ“ä½œ</div>
        <select id="action-select">
          <option value="trash">ã‚´ãƒŸç®±ã¸ç§»å‹•ï¼ˆå‰Šé™¤ï¼‰</option>
          <option value="archive">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</option>
          <option value="read">æ—¢èª­ã«ã™ã‚‹</option>
        </select>

        <div class="button-row">
          <button id="btn-generate" class="btn-main">
            <span class="icon">âœ¨</span> æ¡ä»¶ã‚’ä½œæˆã™ã‚‹
          </button>
          <button id="btn-preview" class="btn-secondary">
            <span class="icon">ğŸ”</span> ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆç¢ºèªï¼‰
          </button>
          <button id="btn-execute" class="btn-danger">
            <span class="icon">âš ï¸</span> æœ¬ç•ªå®Ÿè¡Œã™ã‚‹
          </button>
        </div>
      </section>

      <!-- å³å´ï¼šãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ / å®Ÿè¡Œçµæœã‚¨ãƒªã‚¢ -->
      <section class="card" aria-label="å®Ÿè¡Œçµæœ">
        <h2>
          <span class="dot"></span>
          Step3ï¼šçµæœã‚’ç¢ºèªã™ã‚‹
        </h2>
        <p class="desc">
          ã€Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã§å¯¾è±¡ä»¶æ•°ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ã€ã€Œæœ¬ç•ªå®Ÿè¡Œã€ã«é€²ã‚“ã§ãã ã•ã„ã€‚<br />
          æœ¬ç•ªå®Ÿè¡Œå¾Œã®ãƒ­ã‚°ã‚‚ã“ã“ã«æ®‹ã‚Šã¾ã™ã€‚
        </p>

        <div class="result-block">
          <div class="result-header">
            <span class="title">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ</span>
            <span class="counter" id="preview-count-label">å¯¾è±¡ä»¶æ•°: - ä»¶</span>
          </div>
          <textarea id="preview-text" rows="6" placeholder="ã€Œæ¡ä»¶ã‚’ä½œæˆ â†’ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã®é †ã«æ“ä½œã™ã‚‹ã¨ã€ã“ã“ã« Gmail API ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚"></textarea>
        </div>

        <div class="result-block danger">
          <div class="result-header">
            <span class="title">æœ¬ç•ªå®Ÿè¡Œã®ãƒ­ã‚°ï¼ˆGmail API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼‰</span>
            <span class="counter" id="result-count-label">æœ€çµ‚ä»¶æ•°: - ä»¶</span>
          </div>
          <textarea id="result-text" rows="6" placeholder="ã€Œæœ¬ç•ªå®Ÿè¡Œã€ã‚’æŠ¼ã™ã¨ã€ã“ã“ã« Gmail API ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å…¨ä½“ãŒãƒ­ã‚°ã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã™ã€‚"></textarea>
        </div>

        <div class="button-row">
          <button id="btn-clear-result" class="btn-ghost">
            ãƒ­ã‚°ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹
          </button>
        </div>

        <!-- åºƒå‘Šã‚¹ãƒ­ãƒƒãƒˆ 1 -->
        <div class="ad-slot">
          <strong>åºƒå‘Šã‚¹ãƒ­ãƒƒãƒˆ Aï¼ˆä¸Šéƒ¨ï¼‰</strong><br />
          ã“ã“ã«ãƒãƒŠãƒ¼åºƒå‘Šã‚„ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒªãƒ³ã‚¯ã‚’è¨­ç½®ã§ãã¾ã™ã€‚<br />
          ä¾‹ï¼šæœ‰æ–™ç‰ˆã€Œè‡ªå‹•ã§æ¯æ—¥ã‚¯ãƒªãƒ¼ãƒ³ã€ã®æ¡ˆå†…ã‚„ã€ãƒ¡ãƒ¼ãƒ«æ•´ç†ã®ã‚³ãƒ„è¨˜äº‹ãªã©ã€‚
        </div>

        <!-- åºƒå‘Šã‚¹ãƒ­ãƒƒãƒˆ 2 -->
        <div class="ad-slot">
          <strong>åºƒå‘Šã‚¹ãƒ­ãƒƒãƒˆ Bï¼ˆä¸­æ®µï¼‰</strong><br />
          ãƒ»Gmail æ•´ç†ä»£è¡Œã‚µãƒ¼ãƒ“ã‚¹<br />
          ãƒ»ã‚ªãƒ³ãƒ©ã‚¤ãƒ³è¬›åº§ / note è¨˜äº‹ã¸ã®ãƒªãƒ³ã‚¯<br />
          ãƒ»åˆ¥ãƒ„ãƒ¼ãƒ«ï¼ˆiCloud ç‰ˆ / ä»•äº‹ç”¨ç‰ˆï¼‰ã¸ã®å°ç·š
        </div>

        <!-- åºƒå‘Šã‚¹ãƒ­ãƒƒãƒˆ 3 -->
        <div class="ad-slot">
          <strong>åºƒå‘Šã‚¹ãƒ­ãƒƒãƒˆ Cï¼ˆãƒ•ãƒƒã‚¿ãƒ¼æ¨ªï¼‰</strong><br />
          ãƒ†ã‚­ã‚¹ãƒˆãƒªãƒ³ã‚¯åºƒå‘Šã‚„ç´¹ä»‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãªã©ã«ä½¿ãˆã‚‹ã‚¹ãƒšãƒ¼ã‚¹ã§ã™ã€‚
        </div>
      </section>
    </main>

    <footer>
      Mail Cleaner Lab â€“ Gmail è‡ªå‹•æ•´ç†ãƒ„ãƒ¼ãƒ«ï¼ˆautomaker-hub ç‰ˆï¼‰
    </footer>
  </div>

  <!-- ===================== -->
  <!--   JavaScript éƒ¨åˆ†      -->
  <!-- ===================== -->
  <script>
    // ====== OAuth è¨­å®š ======
    const CLIENT_ID =
      "923017588150-th43jikkldliggrt258aqg95hrk2ob73.apps.googleusercontent.com";
    const REDIRECT_URI = "https://automaker-hub.github.io/";
    const SCOPES = "https://www.googleapis.com/auth/gmail.modify";

    const API_BASE = "https://gmail.googleapis.com/gmail/v1/users/me";

    const authStatusEl = document.getElementById("auth-status");

    function setAuthStatus(connected) {
      if (!authStatusEl) return;
      authStatusEl.innerHTML =
        '<span class="dot ' +
        (connected ? "on" : "off") +
        '" id="auth-dot"></span> ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ' +
        (connected ? "é€£æºæ¸ˆã¿ âœ”" : "æœªé€£æº");
    }

    // ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ï¼ˆlocalStorageï¼‰
    function getStoredToken() {
      const token = localStorage.getItem("gmail_token");
      setAuthStatus(!!token);
      return token;
    }

    // Google OAuth é–‹å§‹
    function loginWithGoogle() {
      const url =
        "https://accounts.google.com/o/oauth2/v2/auth" +
        "?client_id=" +
        encodeURIComponent(CLIENT_ID) +
        "&redirect_uri=" +
        encodeURIComponent(REDIRECT_URI) +
        "&response_type=token" +
        "&scope=" +
        encodeURIComponent(SCOPES) +
        "&include_granted_scopes=true" +
        "&prompt=consent";

      window.location.href = url;
    }

    document
      .getElementById("oauth-btn")
      .addEventListener("click", loginWithGoogle);

    // ã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆ
    document.getElementById("btn-signout").addEventListener("click", () => {
      localStorage.removeItem("gmail_token");
      setAuthStatus(false);
      alert("ã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã¦ã„ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‰Šé™¤ã—ã¾ã—ãŸï¼‰");
    });

    // URL ãƒãƒƒã‚·ãƒ¥ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æŠ½å‡º
    function extractAccessToken() {
      const hash = window.location.hash.substring(1);
      if (hash) {
        const params = new URLSearchParams(hash);
        const token = params.get("access_token");
        if (token) {
          localStorage.setItem("gmail_token", token);
          setAuthStatus(true);
          console.log("Google OAuth æˆåŠŸï¼ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜ã—ã¾ã—ãŸ");
          // ãƒãƒƒã‚·ãƒ¥ã‚’URLã‹ã‚‰æ¶ˆã—ã¦è¦‹ãŸç›®ã‚’ã‚­ãƒ¬ã‚¤ã«
          history.replaceState(
            null,
            "",
            window.location.pathname + window.location.search
          );
          return;
        }
      }
      // æ—¢ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹å ´åˆ
      getStoredToken();
    }

    extractAccessToken();

    // å…±é€šï¼šGmail API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    async function gmailRequest(path, options = {}) {
      const token = getStoredToken();
      if (!token) {
        throw new Error(
          "Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã¾ã é€£æºã—ã¦ã„ã¾ã›ã‚“ã€‚ã€ŒGoogle ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºã€ãƒœã‚¿ãƒ³ã‹ã‚‰èªå¯ã—ã¦ãã ã•ã„ã€‚"
        );
      }

      const res = await fetch(API_BASE + path, {
        ...options,
        headers: {
          Authorization: "Bearer " + token,
          Accept: "application/json",
          ...(options.headers || {}),
        },
      });

      if (!res.ok) {
        const text = await res.text();
        throw new Error("HTTP " + res.status + " : " + text);
      }

      if (res.status === 204) {
        return {};
      }

      return res.json();
    }

    // ==========================
    // Gmail æ¤œç´¢ãƒ„ãƒ¼ãƒ«å´ã®å‡¦ç†
    // ==========================
    const queryTextEl = document.getElementById("query-text");
    const previewTextEl = document.getElementById("preview-text");
    const resultTextEl = document.getElementById("result-text");
    const previewCountLabel = document.getElementById("preview-count-label");
    const resultCountLabel = document.getElementById("result-count-label");

    // æ¤œç´¢æ¡ä»¶ã‚’çµ„ã¿ç«‹ã¦
    function buildGmailQuery() {
      const from = document.getElementById("from-input").value.trim();
      const subject = document.getElementById("subject-input").value.trim();
      const body = document.getElementById("body-input").value.trim();
      const exclude = document.getElementById("exclude-input").value.trim();
      const after = document.getElementById("after-input").value.trim();
      const before = document.getElementById("before-input").value.trim();

      const parts = [];

      if (from) {
        parts.push(`from:(${from})`);
      }
      if (subject) {
        parts.push(`subject:(${subject})`);
      }
      if (body) {
        parts.push(`{${body}}`);
      }
      if (exclude) {
        parts.push(`-{${exclude}}`);
      }
      if (after) {
        parts.push(`after:${after}`);
      }
      if (before) {
        parts.push(`before:${before}`);
      }

      return parts.join(" ");
    }

    // ãƒ—ãƒªã‚»ãƒƒãƒˆé©ç”¨
    function applyPreset(key) {
      const fromInput = document.getElementById("from-input");
      const subjectInput = document.getElementById("subject-input");
      const bodyInput = document.getElementById("body-input");
      const excludeInput = document.getElementById("exclude-input");
      const afterInput = document.getElementById("after-input");
      const beforeInput = document.getElementById("before-input");

      // ä¸€æ—¦ãƒªã‚»ãƒƒãƒˆ
      fromInput.value = "";
      subjectInput.value = "";
      bodyInput.value = "";
      excludeInput.value = "";
      afterInput.value = "";
      beforeInput.value = "";

      switch (key) {
        case "rakuten":
          fromInput.value = "@rakuten.co.jp";
          subjectInput.value = "ãƒã‚¤ãƒ³ãƒˆ, ãŠå¾—, ã‚»ãƒ¼ãƒ«";
          break;
        case "amazon":
          fromInput.value = "@amazon.co.jp";
          subjectInput.value = "ãŠã™ã™ã‚, ã‚»ãƒ¼ãƒ«, ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³";
          break;
        case "promo":
          bodyInput.value = "ã‚»ãƒ¼ãƒ«, ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³, åºƒå‘Š";
          break;
        case "magazine":
          subjectInput.value = "ãƒ¡ãƒ«ãƒã‚¬, newsletter";
          break;
        case "old-promo":
          bodyInput.value = "ã‚»ãƒ¼ãƒ«, ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³, åºƒå‘Š";
          beforeInput.value = "30d";
          break;
      }

      const query = buildGmailQuery();
      queryTextEl.value = query;
    }

    // æ¤œç´¢æ¡ä»¶ã‚’è‡ªå‹•ç”Ÿæˆ
    function handleGenerateQuery() {
      const query = buildGmailQuery();
      queryTextEl.value = query;
      if (!query) {
        alert(
          "æ¤œç´¢æ¡ä»¶ãŒç©ºã§ã™ã€‚é€ä¿¡å…ƒã‚„ä»¶åãªã©ã‚’å…¥åŠ›ã—ã¦ã‹ã‚‰ã€Œæ¡ä»¶ã‚’ä½œæˆã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚"
        );
      }
    }

    // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆæœ¬ç‰©ã® Gmail APIï¼‰
    async function handlePreview() {
      const query = queryTextEl.value.trim() || buildGmailQuery();
      if (!query) {
        alert(
          "æ¤œç´¢æ¡ä»¶ãŒç©ºã§ã™ã€‚ã€Œæ¡ä»¶ã‚’ä½œæˆã€ã‚’æŠ¼ã™ã‹ã€æ¡ä»¶ã‚’ç›´æ¥å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"
        );
        return;
      }

      previewCountLabel.textContent = "å¯¾è±¡ä»¶æ•°: å–å¾—ä¸­...";
      previewTextEl.value =
        "Gmail API ã«å•ã„åˆã‚ã›ä¸­ã§ã™...\n\næ¤œç´¢æ¡ä»¶: " + query + "\n";

      try {
        const data = await gmailRequest(
          "/messages?q=" + encodeURIComponent(query) + "&maxResults=50"
        );

        const count =
          typeof data.resultSizeEstimate === "number"
            ? data.resultSizeEstimate
            : (data.messages || []).length;

        previewCountLabel.textContent =
          "å¯¾è±¡ä»¶æ•°ï¼ˆæ¨å®šï¼‰: " + count.toString() + " ä»¶";

        previewTextEl.value =
          "ã€Gmail API ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‘\n" +
          "æ¤œç´¢æ¡ä»¶: " +
          query +
          "\n\n" +
          "resultSizeEstimate: " +
          count +
          " ä»¶\n" +
          "maxResults=50 ã§å–å¾—ã—ãŸ 1 ãƒšãƒ¼ã‚¸ç›®ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹:\n\n" +
          JSON.stringify(data, null, 2);
      } catch (err) {
        console.error(err);
        previewCountLabel.textContent = "å¯¾è±¡ä»¶æ•°: å–å¾—å¤±æ•—";
        previewTextEl.value =
          "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚\n\n" + (err && err.message ? err.message : err);
      }
    }

    function buildBatchBody(action, ids) {
      const body = {
        ids,
        addLabelIds: [],
        removeLabelIds: [],
      };

      switch (action) {
        case "trash":
          body.addLabelIds.push("TRASH");
          break;
        case "archive":
          body.removeLabelIds.push("INBOX");
          break;
        case "read":
          body.addLabelIds.push("READ");
          body.removeLabelIds.push("UNREAD");
          break;
      }

      return body;
    }

    // æœ¬ç•ªå®Ÿè¡Œ
    async function handleExecute() {
      const query = queryTextEl.value.trim() || buildGmailQuery();
      if (!query) {
        alert(
          "æ¤œç´¢æ¡ä»¶ãŒç©ºã§ã™ã€‚ã€Œæ¡ä»¶ã‚’ä½œæˆ â†’ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã§å†…å®¹ã‚’ç¢ºèªã—ã¦ã‹ã‚‰å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚"
        );
        return;
      }

      const action = document.getElementById("action-select").value;

      let actionLabel = "";
      if (action === "trash") actionLabel = "ã‚´ãƒŸç®±ã¸ç§»å‹•ï¼ˆå‰Šé™¤ï¼‰";
      if (action === "archive") actionLabel = "ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–";
      if (action === "read") actionLabel = "æ—¢èª­ã«ã™ã‚‹";

      const ok = confirm(
        "ã€è¶…æ³¨æ„ã€‘ã“ã®æ¡ä»¶ã§ Gmail ã«æœ¬ç•ªå®Ÿè¡Œã—ã¾ã™ã€‚\n\n" +
          "æ¤œç´¢æ¡ä»¶: " +
          query +
          "\n" +
          "æ“ä½œ: " +
          actionLabel +
          "\n\n" +
          "ã“ã®æ“ä½œã¯ Gmail ä¸Šã§å–ã‚Šæ¶ˆã—ã§ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚\n" +
          "æœ¬å½“ã«å®Ÿè¡Œã—ã¦ã‚ˆã‘ã‚Œã° [OK] ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚"
      );
      if (!ok) return;

      resultTextEl.value =
        "=== Gmail API æœ¬ç•ªå®Ÿè¡Œé–‹å§‹ ===\n" +
        "æ¤œç´¢æ¡ä»¶: " +
        query +
        "\n" +
        "æ“ä½œ: " +
        actionLabel +
        "\n\n";
      resultCountLabel.textContent = "æœ€çµ‚ä»¶æ•°: å®Ÿè¡Œä¸­...";

      try {
        // æ¡ä»¶ã«ãƒãƒƒãƒã™ã‚‹å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ ID ã‚’å–å¾—ï¼ˆåˆ¶é™ãªã—ï¼‰
        let allIds = [];
        let pageToken = undefined;
        let page = 1;

        while (true) {
          const data = await gmailRequest(
            "/messages?q=" +
              encodeURIComponent(query) +
              "&maxResults=500" +
              (pageToken ? "&pageToken=" + encodeURIComponent(pageToken) : "")
          );

          const ids = (data.messages || []).map((m) => m.id);
          allIds = allIds.concat(ids);

          resultTextEl.value +=
            "--- list page " +
            page +
            " ---\n" +
            JSON.stringify(data, null, 2) +
            "\n\n";

          if (!data.nextPageToken) break;
          pageToken = data.nextPageToken;
          page++;
        }

        if (allIds.length === 0) {
          resultTextEl.value +=
            "è©²å½“ãƒ¡ãƒ¼ãƒ«ã¯ 0 ä»¶ã§ã—ãŸã€‚batchModify ã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚\n";
          resultCountLabel.textContent = "æœ€çµ‚ä»¶æ•°: 0 ä»¶";
          return;
        }

        // å–å¾—ã—ãŸ ID ã‚’ 1000 ä»¶ãšã¤ã«åˆ†å‰²ã—ã¦ batchModify
        const BATCH_SIZE = 1000;
        let processed = 0;
        let batchIndex = 1;

        for (let i = 0; i < allIds.length; i += BATCH_SIZE) {
          const batchIds = allIds.slice(i, i + BATCH_SIZE);
          const body = buildBatchBody(action, batchIds);

          const res = await gmailRequest("/messages/batchModify", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(body),
          });

          processed += batchIds.length;

          resultTextEl.value +=
            "--- batchModify " +
            batchIndex +
            " (" +
            batchIds.length +
            " ä»¶) ---\n" +
            JSON.stringify(res, null, 2) +
            "\n\n";

          batchIndex++;
        }

        resultCountLabel.textContent =
          "æœ€çµ‚ä»¶æ•°: " + processed.toString() + " ä»¶";
        resultTextEl.value +=
          "=== å®Œäº†ã—ã¾ã—ãŸã€‚å‡¦ç†ä»¶æ•°: " +
          processed.toString() +
          " ä»¶ ===\n";
      } catch (err) {
        console.error(err);
        resultTextEl.value +=
          "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚\n\n" +
          (err && err.message ? err.message : err) +
          "\n";
        resultCountLabel.textContent = "æœ€çµ‚ä»¶æ•°: ã‚¨ãƒ©ãƒ¼";
      }
    }

    function handleClearResult() {
      resultTextEl.value = "";
      resultCountLabel.textContent = "æœ€çµ‚ä»¶æ•°: - ä»¶";
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆç´ã¥ã‘
    document
      .getElementById("btn-generate")
      .addEventListener("click", handleGenerateQuery);
    document
      .getElementById("btn-preview")
      .addEventListener("click", () => {
        handlePreview().catch((e) => console.error(e));
      });
    document
      .getElementById("btn-execute")
      .addEventListener("click", () => {
        handleExecute().catch((e) => console.error(e));
      });
    document
      .getElementById("btn-clear-result")
      .addEventListener("click", handleClearResult);

    document.querySelectorAll(".preset button").forEach((btn) => {
      btn.addEventListener("click", () => {
        const key = btn.getAttribute("data-preset");
        applyPreset(key);
      });
    });
  </script>
</body>
</html>
